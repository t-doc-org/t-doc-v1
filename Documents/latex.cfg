\Preamble{xhtml}
\Configure{@HEAD}{
\HCode{%
<script type="module" src="/static/scripts.js" type="text/javascript" async></script>\Hnewline
<script type="text/javascript" src="/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>\Hnewline
}
} % remove default content in HTML header
\Configure{HTML}{\HCode{<html>\Hnewline}}{\HCode{\Hnewline</html>}}
\Configure{@BODY}{\ifvmode\IgnorePar\fi\EndP\HCode{<div>\Hnewline}}
\Configure{@/BODY}{\ifvmode\IgnorePar\fi\EndP\HCode{\Hnewline</div>}}

\makeatletter
\ExplSyntaxOn
\Configure{Gin-dim}{style="width:\fp_eval:n{round(\Gin@req@width/\textwidth*100,2)}\char_generate:nn { `\% } { 12 }"}
\ExplSyntaxOff
\makeatother

\renewcommand\video[3]{%
\HCode{%
<iframe width="#2" height="#3" src="https://www.youtube.com/embed/#1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
}
}

\renewcommand\geogebra[3]{%
\HCode{%
<iframe width="#2" height="#3" src="https://www.geogebra.org/classic/#1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
}
}


%\makeatletter
%\RenewEnviron{lstlisting}{%
%\HCode{%
%<pre>\unexpanded\expandafter{\BODY}</pre>
%}
%}
%\makeatother


\begin{document}
\EndPreamble
